### 题目要求
需求： 根据web服务器上的访问日志，把一些请求量非常高的ip给拒绝掉！并且每隔半小时把不再发起请求或者请求量很小的ip给解封。   假设： 

一分钟内请求量高于100次的IP视为不正常请求。

访问日志路径为 链接:https://pan.baidu.com/s/1hwF3mnttiRf4hrSR0EtKag  密码:w3to

### 核心要点
- 统计ip访问次数，排序
- 如何标记每隔半小时
- iptables 计数器是一个重要的判断指标
- 函数（封IP、解封IP）

### tips

- sed 取反

### sed 用法简介

```
打印文件的 1 到 3 行
sed -n '1,3 p' file 
sed 参数 '处理范围 处理动作' 文件
-n 不会将读入模式空间内的数据输出到标准输出
处理范围可以是一个范围（比如 1,3），也可以是一个具体的单一条件（比如/pattern/, 就匹配这个字符串对应的行）
处理动作比如p是打印的意思，文件指的就是要处理的文件或者标准输入

在源文件上删除
sed -i '.bak' '1,3 !d' file
-i '.bak' 的意思是这样的，-i 参数表示是对源文件直接操作，而对源文件直接操作存在风险，
因此 '.bak' 就是在源文件操作前，提前将文件做一个.bak 后缀的备份
然后找到文件的 1到 3 行，如果没有 ！直接使用 d 就表示对所选的行在原文件上删除，
但是现在加了 ！表示取反，此时表示除了 1 到 3 行，其他的进行删除操作

在源文件上修改
sed -i '.bak' 's/old/new/g' file
同删除一样，修改如果也是在源文件修改的化，需要使用 -i,
如果仅仅是想将修改后的结果输出到标准输出，那么就不需要使用 -i '.bak' 了，这样操作完后数据就直接输出到对应的标准输出
```
